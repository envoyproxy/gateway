name: Request review on PRs

on:
  pull_request_target:
    types:
    - opened
    - reopened  
    branches:
    - "main"
    - "release/v*"        

permissions:
  pull-requests: write

jobs:
  request:
    name: Request reviews from envoyproxy/gateway-reviewers 
    runs-on: ubuntu-latest

    steps:
    - name: Create PR review request
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        gh pr edit ${{ github.event.pull_request.html_url }} \
            --add-reviewer envoyproxy/gateway-reviewers 
