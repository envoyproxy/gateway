name: "accesslog"
accesslog:
  json:
  - json:
    - key: method
      value: "%REQ(:METHOD)%"
    - key: path
      value: "%REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%"
    - key: protocol
      value: "%PROTOCOL%"
    - key: response_code
      value: "%RESPONSE_CODE%"
    - key: start_time
      value: "%START_TIME%"
  als:
  - destination:
      name: accesslog/monitoring/envoy-als/port/9000
      settings:
      - addressType: IP
        endpoints:
        - host: 1.1.1.1
          port: 9000
        protocol: GRPC
        weight: 1
        name: accesslog/monitoring/envoy-als/port/9000/backend/0
    traffic:
      backendConnection:
        bufferLimit: 20971520
      circuitBreaker:
        maxConnections: 2048
      healthCheck:
        passive:
          baseEjectionTime: 30s
          consecutiveGatewayErrors: 4
          consecutive5XxErrors: 5
          consecutiveLocalOriginFailures: 5
          interval: 5s
          maxEjectionPercent: 10
          splitExternalLocalOriginErrors: false
      tcpKeepalive:
        probes: 7
      timeout:
        tcp:
          connectTimeout: 15s
    attributes:
    - key: attr1
      value: value1
    - key: attr2
      value: value2
    type: TCP
