gateways:
  - apiVersion: gateway.networking.k8s.io/v1
    kind: Gateway
    metadata:
      name: gateway-with-one-attached-route
      namespace: envoy-gateway
    spec:
      gatewayClassName: envoy-gateway-class
      listeners:
        - name: http
          port: 80
          protocol: HTTP
          allowedRoutes:
            kinds:
              - kind: HTTPRoute
            namespaces:
              from: Same
  - apiVersion: gateway.networking.k8s.io/v1
    kind: Gateway
    metadata:
      name: gateway-with-two-attached-routes
      namespace: envoy-gateway
    spec:
      gatewayClassName: envoy-gateway-class
      listeners:
        - name: http
          port: 80
          protocol: HTTP
          hostname: "foo.example.com"
          allowedRoutes:
            kinds:
              - kind: HTTPRoute
            namespaces:
              from: Same
  - apiVersion: gateway.networking.k8s.io/v1
    kind: Gateway
    metadata:
      name: unresolved-gateway-with-one-attached-unresolved-route
      namespace: envoy-gateway
    spec:
      gatewayClassName: envoy-gateway-class
      listeners:
        - name: tls
          port: 443
          protocol: HTTPS
          allowedRoutes:
            kinds:
              - kind: HTTPRoute
            namespaces:
              from: Same
          tls:
            certificateRefs:
              - group: ""
                kind: Secret
                name: does-not-exist
            mode: Terminate
httpRoutes:
  - apiVersion: gateway.networking.k8s.io/v1
    kind: HTTPRoute
    metadata:
      name: http-route-1
      namespace: envoy-gateway
    spec:
      parentRefs:
        - kind: Gateway
          name: gateway-with-one-attached-route
          namespace: envoy-gateway
      rules:
        - backendRefs:
            - name: infra-backend-v1
              port: 8080
  - apiVersion: gateway.networking.k8s.io/v1
    kind: HTTPRoute
    metadata:
      name: http-route-2
      namespace: envoy-gateway
    spec:
      parentRefs:
        - kind: Gateway
          name: gateway-with-two-attached-routes
          namespace: envoy-gateway
      rules:
        - backendRefs:
            - name: infra-backend-v1
              port: 8080
  - apiVersion: gateway.networking.k8s.io/v1
    kind: HTTPRoute
    metadata:
      name: http-route-3
      namespace: envoy-gateway
    spec:
      parentRefs:
        - kind: Gateway
          name: gateway-with-two-attached-routes
          namespace: envoy-gateway
      rules:
        - backendRefs:
            - name: infra-backend-v1
              port: 8080
  - apiVersion: gateway.networking.k8s.io/v1
    kind: HTTPRoute
    metadata:
      name: http-route-not-accepted
      namespace: envoy-gateway
    spec:
      hostnames:
        # mismatched hostname here (listener hostname is foo.example.com) triggers NoMatchingListenerHostname reason
        - "not-accepted.test.com"
      parentRefs:
        - kind: Gateway
          name: gateway-with-two-attached-routes
          namespace: envoy-gateway
      rules:
        - backendRefs:
            - name: infra-backend-v1
              port: 8080
  - apiVersion: gateway.networking.k8s.io/v1beta1
    kind: HTTPRoute
    metadata:
      name: http-route-4
      namespace: envoy-gateway
    spec:
      parentRefs:
        - kind: Gateway
          name: unresolved-gateway-with-one-attached-unresolved-route
          namespace: envoy-gateway
          sectionName: tls
      rules:
        - backendRefs:
            - name: does-not-exist
              port: 8080
