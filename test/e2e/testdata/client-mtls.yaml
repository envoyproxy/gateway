apiVersion: v1
data:
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRQ3N0SDg4dVdtVmJUSTkKTlZHemc1SlVrZFp0dWRpclFOci81SHpqYU9lbmVBVDVZSTFNRmtGVEVVcTFOWU84VHBGYittL3h0N1o1Z0Y2VwpIK2xVZGZOdG96czZmdFFodkhvaFJ5WERuNmxvbU52THVxa1ZuaVQxWHMxN2dKZG9NYW00anVpcmVxWjYrSXFvClU0Ui9yNDFyRmphUWlGNUpkYTdtRjU4VmYrQWZBcW5FU011aG9TYzUyUmVNT0t3T2czaFVYM2NyZFlMcHBIZTUKemxGMS91R045cE1DeFJEdHhySUVQTG9tUXdYTGp5dlJlQmcrZHJlbHpkRHBIdWVlTVNMMVZxSUV1VnZjVDBmNgpqWFFXUndtVzhEWElPRURHSHBuNkpDWFVNL00xQ0s3ODFDSnQ3NlBTdTZ2Tm0rY3VSQ1o5bHhQZlV0cWVrMzYzCmg1cFQ4eWVMQWdNQkFBRUNnZ0VBUGZHWFdWNWZRbHNpRTlZVjhiOFZNd1FEMXVNN2xXRHpxNmgyS3RLcmsrTjIKVlVPT0ttWXBFL1ExeVh6aVBSNHBBTVo0ZEVnaVNMNEVMdkJQTGg0SUs2REtVNWE5MjBQUXdqTFVscStqZ1lLaQpBeFoySXV6UDhMb0tGV3Z2NGswOXhKWnRXV1BxWmx6U3pzRDEyeDVLS01pVTFZNHowMEZFYy82dzduTXBIYld0CndobjdJZmhFV0s2UWVIRUlWZklaZThhZEduNTE1elVLWndjWWZxZFZrdEtNNmJjeUIrWjJqWGRBLzA4Wmd6U3YKNmxKY3pPaXA4MDFaK0pYZnlnbDJZNDRPdURQV3Q1cytVaTgwODFrTndxUmkweFBlN3JUTG9RU2dRM2piYnY1RQppUkkwQzM2ekx0dmR0R21GZGNIbXdDVDJVZlBNUDZxRW9ReTd1eXB3Z1FLQmdRRGVLLzhIUndxdXdTdjBxRG5FCkd4RzBuYVVIbEFFcE5ycFdUVjg5T1UxSklHUC8yMzNBYmJIbkZqWlhqUzRadC83L1NmVkRGOFlMdGpIKzRCQXYKOWNhNXdhZ1pkblh4SkcxWmpXY0VvMXlpTERsT0lDTitpbkc2SDFSZTM5T0hKSzVUZk1YcEhNZVpHSXREZU56Twp1N0NCOEp0RkdTRE14YXNNNWlPK2tza3Vxd0tCZ1FESEFGZVFLbDZrQmo5TThLZ0NzQzJIVzY0SVZaejluQTRwClpSbFViaTc5Y3lBakJMdE4rOFlpVnlVNUUzTTZWYXNiREtqT3dWaUltMEYvOE9Hck9MU2paRFRicG1Rd01tMDUKMXp0bUU2UittSXFnNm1CK1ZWWko0OU9UTTBVWkdWK3k5ZmsyMWxKS2ZMQWhEdkhUajF0MldlNDEvTktheDlLagpUNE5OZWs1cW9RS0JnRmR2ZVM2a0J0QS90Y3pUWitpRnZySVdXSnhpNHhJVk44QS9NdndsVVFVMmVpUjNmVVg5CjVjWE1PQmE4dVNmbUFiVDJwaytCUzYvUVJGektVWlNPWldjMWo3SjFySFQ2b1E1ZFYrMjdYUGwxN2hlUkRtYisKbFVOcWtRbkZqTG5pOWJobG9uM2JsYkhxdHVRVzdNOXZqa2VWS1laSUhXQjVhcGZvK3FoRm5HZUJBb0dCQUoraQpLcHUvSVVRNnJyU3RxRmpmc3VZT0tVRU9URzAwcmplT25nOFloQ0ZVSk1keW1ENHFaZnBPSmRIdlJGUGJQUExwCjZOQlNVUTdrWEZxaGhLV3hTMVoybitCRFRjTkw4RXFoMlVnOUlZdGNHbmlUQ3V6TXovZGVCdTdpQmQvb2R0ZzgKY0xvSW11S2R1endKblB1MDJBM01ma1pZbFNrTWVtLys3TGxPRDNHQkFvR0FKTnFZSmtuN1A3WFRtVnp0dGNDMgpPR3d4NzQ0bmdBV3JZcGg3Nm94cmoxWHBRQ3NvMlo4RFV0NzJ2anlJQnNHMytFNHNRL3c4WWFaNUE3R0ErOGpCCkJ2UVBFS0l2QzZ6WEZIQ3lOeTM1MFdjaFZFa1dzK2k2YVl1elZTRVVOWjV4RlFHcExXa0hJMFo5cXN5eTlsUmMKT2tFVmFqTHd3cXBTK2ZFTGljcVRjUTQ9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0=
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR6akNDQXJhZ0F3SUJBZ0lVT0dKOUx1VGtKWkU0NmNVaUpGYmJ2bm10elFvd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2J6RUxNQWtHQTFVRUJoTUNWVk14Q3pBSkJnTlZCQWdNQWxaQk1SRXdEd1lEVlFRSERBaFRiMjFsUTJsMAplVEVUTUJFR0ExVUVDZ3dLUlc1MmIzbFFjbTk0ZVRFUU1BNEdBMVVFQ3d3SFIyRjBaWGRoZVRFWk1CY0dBMVVFCkF3d1FiWFJzY3k1bGVHRnRjR3hsTG1OdmJUQWdGdzB5TkRBM01UWXlNalV4TWpOYUdBOHlNVEkwTURZeU1qSXkKTlRFeU0xb3diekVMTUFrR0ExVUVCaE1DVlZNeEN6QUpCZ05WQkFnTUFsWkJNUkV3RHdZRFZRUUhEQWhUYjIxbApRMmwwZVRFVE1CRUdBMVVFQ2d3S1JXNTJiM2xRY205NGVURVFNQTRHQTFVRUN3d0hSMkYwWlhkaGVURVpNQmNHCkExVUVBd3dRYlhSc2N5NWxlR0Z0Y0d4bExtTnZiVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBS3kwZnp5NWFaVnRNajAxVWJPRGtsU1IxbTI1Mkt0QTJ2L2tmT05vNTZkNEJQbGdqVXdXUVZNUgpTclUxZzd4T2tWdjZiL0czdG5tQVhwWWY2VlIxODIyak96cCsxQ0c4ZWlGSEpjT2ZxV2lZMjh1NnFSV2VKUFZlCnpYdUFsMmd4cWJpTzZLdDZwbnI0aXFoVGhIK3ZqV3NXTnBDSVhrbDFydVlYbnhWLzRCOENxY1JJeTZHaEp6bloKRjR3NHJBNkRlRlJmZHl0MWd1bWtkN25PVVhYKzRZMzJrd0xGRU8zR3NnUTh1aVpEQmN1UEs5RjRHRDUydDZYTgowT2tlNTU0eEl2VldvZ1M1Vzl4UFIvcU5kQlpIQ1pid05jZzRRTVllbWZva0pkUXo4elVJcnZ6VUltM3ZvOUs3CnE4MmI1eTVFSm4yWEU5OVMycDZUZnJlSG1sUHpKNHNDQXdFQUFhTmdNRjR3Q3dZRFZSMFBCQVFEQWdTd01CTUcKQTFVZEpRUU1NQW9HQ0NzR0FRVUZCd01CTUJzR0ExVWRFUVFVTUJLQ0VHMTBiSE11WlhoaGJYQnNaUzVqYjIwdwpIUVlEVlIwT0JCWUVGRm1FTjBqRVFpckpYeGlLRHFlK2tTMVV3Q2gyTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCCkFRQ0NTVlluRVJPbHJpWDM2M0VtRzd1b091Nm54ajU1eWVmOXRKbnRubFVMVFZsMjlqc205Z3d5VnFUVCtUcXMKdzFPYW01TExmMEpjSWNRdmFUM203b0RpMElDUUo5eTlRQkNwMTh1TDBUeElDaFdVRTVnRUIxM3MyTzEwWWNFMQp1K2ozSzM0MStQNStoaEJpQnJ1d0dncStkVVRGRTZTYVVMY0xMVlB1RjdTeG1KbTRHK0Q0NVlqM1NDVy9aMzU2CkFXZzB4L0prZGFKSVVLVFJaUDVJTEZKQ1lJTUM3QWI1RmdWeGRCVW5kNWxheUZGb2NVMzRQaDlwZUxiYW00alYKdGt0SGNTSFJ6OERNTm1PNHpHTEZYNzlQR0lsaTZzTDU3V0N6bkw5RFFtajRyajFIS2tyeEdnMVExbUcwbDhOTQo5cXQyWEZNNUttWkVOb2E1MmFWSklHYWoKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR6akNDQXJhZ0F3SUJBZ0lVT0dKOUx1VGtKWkU0NmNVaUpGYmJ2bm10elFvd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2J6RUxNQWtHQTFVRUJoTUNWVk14Q3pBSkJnTlZCQWdNQWxaQk1SRXdEd1lEVlFRSERBaFRiMjFsUTJsMAplVEVUTUJFR0ExVUVDZ3dLUlc1MmIzbFFjbTk0ZVRFUU1BNEdBMVVFQ3d3SFIyRjBaWGRoZVRFWk1CY0dBMVVFCkF3d1FiWFJzY3k1bGVHRnRjR3hsTG1OdmJUQWdGdzB5TkRBM01UWXlNalV4TWpOYUdBOHlNVEkwTURZeU1qSXkKTlRFeU0xb3diekVMTUFrR0ExVUVCaE1DVlZNeEN6QUpCZ05WQkFnTUFsWkJNUkV3RHdZRFZRUUhEQWhUYjIxbApRMmwwZVRFVE1CRUdBMVVFQ2d3S1JXNTJiM2xRY205NGVURVFNQTRHQTFVRUN3d0hSMkYwWlhkaGVURVpNQmNHCkExVUVBd3dRYlhSc2N5NWxlR0Z0Y0d4bExtTnZiVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBS3kwZnp5NWFaVnRNajAxVWJPRGtsU1IxbTI1Mkt0QTJ2L2tmT05vNTZkNEJQbGdqVXdXUVZNUgpTclUxZzd4T2tWdjZiL0czdG5tQVhwWWY2VlIxODIyak96cCsxQ0c4ZWlGSEpjT2ZxV2lZMjh1NnFSV2VKUFZlCnpYdUFsMmd4cWJpTzZLdDZwbnI0aXFoVGhIK3ZqV3NXTnBDSVhrbDFydVlYbnhWLzRCOENxY1JJeTZHaEp6bloKRjR3NHJBNkRlRlJmZHl0MWd1bWtkN25PVVhYKzRZMzJrd0xGRU8zR3NnUTh1aVpEQmN1UEs5RjRHRDUydDZYTgowT2tlNTU0eEl2VldvZ1M1Vzl4UFIvcU5kQlpIQ1pid05jZzRRTVllbWZva0pkUXo4elVJcnZ6VUltM3ZvOUs3CnE4MmI1eTVFSm4yWEU5OVMycDZUZnJlSG1sUHpKNHNDQXdFQUFhTmdNRjR3Q3dZRFZSMFBCQVFEQWdTd01CTUcKQTFVZEpRUU1NQW9HQ0NzR0FRVUZCd01CTUJzR0ExVWRFUVFVTUJLQ0VHMTBiSE11WlhoaGJYQnNaUzVqYjIwdwpIUVlEVlIwT0JCWUVGRm1FTjBqRVFpckpYeGlLRHFlK2tTMVV3Q2gyTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCCkFRQ0NTVlluRVJPbHJpWDM2M0VtRzd1b091Nm54ajU1eWVmOXRKbnRubFVMVFZsMjlqc205Z3d5VnFUVCtUcXMKdzFPYW01TExmMEpjSWNRdmFUM203b0RpMElDUUo5eTlRQkNwMTh1TDBUeElDaFdVRTVnRUIxM3MyTzEwWWNFMQp1K2ozSzM0MStQNStoaEJpQnJ1d0dncStkVVRGRTZTYVVMY0xMVlB1RjdTeG1KbTRHK0Q0NVlqM1NDVy9aMzU2CkFXZzB4L0prZGFKSVVLVFJaUDVJTEZKQ1lJTUM3QWI1RmdWeGRCVW5kNWxheUZGb2NVMzRQaDlwZUxiYW00alYKdGt0SGNTSFJ6OERNTm1PNHpHTEZYNzlQR0lsaTZzTDU3V0N6bkw5RFFtajRyajFIS2tyeEdnMVExbUcwbDhOTQo5cXQyWEZNNUttWkVOb2E1MmFWSklHYWoKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
kind: Secret
metadata:
  name: client-mtls-certificate
  namespace: gateway-conformance-infra
type: kubernetes.io/tls
---
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: client-mtls-gateway
  namespace: gateway-conformance-infra
spec:
  gatewayClassName: "{GATEWAY_CLASS_NAME}"
  listeners:
    - name: tls-settings
      port: 443
      protocol: HTTPS
      hostname: tls-settings.example.com
      tls:
        certificateRefs:
          - group: ""
            kind: Secret
            name: client-tls-settings-certificate
        mode: Terminate
    - name: mtls
      port: 443
      protocol: HTTPS
      hostname: mtls.example.com
      tls:
        certificateRefs:
          - group: ""
            kind: Secret
            name: client-mtls-certificate
        mode: Terminate
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: http-client-mtls
  namespace: gateway-conformance-infra
spec:
  hostnames:
    - mtls.example.com
  parentRefs:
    - name: client-mtls-gateway
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /client-mtls
      backendRefs:
        - name: infra-backend-v1
          port: 8080
---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: ClientTrafficPolicy
metadata:
  name: ctp-client-mtls
  namespace: gateway-conformance-infra
spec:
  targetRef:
    group: gateway.networking.k8s.io
    kind: Gateway
    name: client-mtls-gateway
    sectionName: mtls
  headers:
    xForwardedClientCert:
      certDetailsToAdd:
        - Subject
      mode: SanitizeSet
  tls:
    clientValidation:
      caCertificateRefs:
        - kind: "Secret"
          group: ""
          name: "client-mtls-certificate"
---
# openssl req -x509 -sha256 -nodes -days 3650 -newkey rsa:2048 -subj '/O=example Inc./CN=example.com' -keyout ca.key -out ca.crt
# cat > openssl.conf  <<EOF
# [req]
#   req_extensions = v3_req
#   prompt = no
#
# [v3_req]
#   keyUsage = keyEncipherment, digitalSignature
#   extendedKeyUsage = serverAuth
#   subjectAltName = @alt_names
# [alt_names]
#   DNS.1 = tls-settings.example.com
# EOF
# openssl req -out tls-settings.example.com.csr -newkey rsa:2048 -nodes -keyout tls-settings.example.com.key -subj "/CN=tls-settings.example.com/O=example organization"
# openssl x509 -req -days 3650 -CA ca.crt -CAkey ca.key -set_serial 0 -in tls-settings.example.com.csr -out tls-settings.example.com.crt -extfile openssl.conf -extensions v3_req
apiVersion: v1
data:
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRREVjUWNWTnM3bmduWjIKZHoycTdibmc5WWFBZEVJaDFQQzBzbGVXcFNxMWVMYm5ualV4TTNmemZKbTE5RGI1OTZ5N1pzVUdoQWJjOGFaYQpIMU5vOVVhVGZFNVl3bDRVU0Rvb1ZOS0M0VWw0aGp4NDk5TSt5MXFEY0pkOE80R2J6UjUvdWMvWjJuem9WRzdqCnFwMGpnOWJhditjcThiZmh0NENOd1NhUmc5ZzZNeDFIZ2xaS3QxcUFiSVVBMGMzbUszRVJzcWVTaUdSZld5c2IKaUZranNOR1dHSjI0ZzZGbWxzKzVWczRvWnMvOEZFcmJKMHZHYTZpSkorYWFTemRoY3krVHNmRXU1ZkJncHJhUQpNU3YzZU80c2k4Z1ArRFZieC9hbldudGNDZHFtNTlONzBOYnUzSGxEVmVhMkFYb2I3RHk0VngzSzBNOGNreThmClNRSzNUUG1GQWdNQkFBRUNnZ0VBQkFjNFVkcmQ1cWJJNXVGK2NPb0tqRm4vKzRyWkRRaFdhL3ROaHBKRFJXZTgKVkxrMW4ySnBqZEVLMGJ0bUN3L1RCUTNDYUhoblpwL1J5eEQwVDA1YTNDMEZNMFJrT1VWU0NOYm5BM3F4MDNYcApnbFE4cGorSHhlQ1dremV6VHZEQzlNOHhsdmtEbXNVSG5Lb0txbDd6c2NRQnQxbENOc3NZK3dGMC9YbXdRczZuCnhwZDV1QjdKeTdZYkE0dFZJWmVlVHhTaVR3ZHFBK3FQbVRVTXcrbHBxUzVPVUpiRkNrSWFUNXBQYVJERWN0K3UKZUwwRVV0U1BrczFyQit4WFVGQlkxL1dXYStBUm0wVXJxYTZLdGQ4Vkx6ZmovYkNUU2JsYkhqM2hkWWpKZFFaQwpkYjhNdHhlNVZTdC81R2JxUjJJRlBCZXE4bE9hWUpFYzJCaXdScXo3WVFLQmdRRDRuWE50RXhEd29XcFVxZXlhClBRSkhJZDBZN25saG92ZkYreU81WUVERytVSkVhRysreGdRR1Rzc1lTZ1pNaVR5bGQ2VWIrWkdRbHllT3djSVkKRDZJSXl0YXovaGJicy93TXJtMXZtbzNtcnR5V3VQcUkzend3U2VZOHBrcEtPQzhaSS9UUmM3dmVqZFZabXgydwo4QUtSdHN4aTNXYUJPUVVIMkZpcGpEQ3Y1UUtCZ1FES1J0VVpUOVBTS0k2WmE5dTBmUFFKR2JTZmpvWlJZVUgwClJVSkhsanJtbzdxQkFtdzRzbUpqaUQxRUswTEdFUVZJMmpVUFYvNXZPdUxsZHpFVHRmK1o5Ynl1V3o0a0JQRE4KN1M2cmEwQktiT0xyUEw2eGd2S2FMRURMWUhhZFN1YmwxNWJDQnRaUU5NMkJNcG9TY0xtbUNDQXB5YVFiVmVMVQpoNjNsM1laSklRS0JnR0hxQ1BLMVpwK093d1R6STRjZmJnMDd6Z3NxcU0yR1ZKVTVzcmtvcW5weTR1RjBURVpUClVIUjNoYzljSUJ6Mms5Y0xSeEM4ZXRMNlpRNzVTb3NWWlJpWFluWGpKWGVEN0VuR1RMMStubEp6SGRlU3BNRlIKUWpBMmVxSDZVQm5wQk11ZStLV2hNaVdWc0tnb3lrbk1UUWE4ZXNTWk0rekMyek5heHBpSDZRanRBb0dBRTlDawpoM28rY2RQdlJEQkFzWW1jRGxncVRZY1V1VndocmVBckFnQkJmTjZGSXFZdUc4Kzl1NnBZOWhpV3pmaFU0RElnCkNJVENNL3M4eHVYS05QZ2JOZVhRdWZQT1BwRU5WZDdxTjNpbUw2UkRCbkJJN2ZLNStVaGtnSWZPbHRJRGxIaHUKR0V1N0t0aEJXV3F2bFNiZHlObjY3SjBJS25WYlp4NXpkcFVnMW9FQ2dZQmtvVVlKNTcxSGRkMGdlMStHcGE0QgpEd250VkpwNzlGbEx3WEdJc2JHeDVycnhNbWRkbU9mMXdQa1FrdEp3YXAwNmNSOGR0RSthZElYeFBHbzBMVzVQCm5jUG1IN0NwbmZuZjFJRnZMbDk0WEhzNktpZDJhVGkxK0h4UlVYb3lzaHM1TDFvOCtWR1VHTnFxeUFPZGgzSzEKRW9DcXVQS205ZGNMVGhqMUxLRjdsZz09Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURkVENDQWwyZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREF0TVJVd0V3WURWUVFLREF4bGVHRnQKY0d4bElFbHVZeTR4RkRBU0JnTlZCQU1NQzJWNFlXMXdiR1V1WTI5dE1CNFhEVEkwTURreU56RTBNVGN6TjFvWApEVE0wTURreU5URTBNVGN6TjFvd1FqRWhNQjhHQTFVRUF3d1lkR3h6TFhObGRIUnBibWR6TG1WNFlXMXdiR1V1ClkyOXRNUjB3R3dZRFZRUUtEQlJsZUdGdGNHeGxJRzl5WjJGdWFYcGhkR2x2YmpDQ0FTSXdEUVlKS29aSWh2Y04KQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU1SeEJ4VTJ6dWVDZG5aM1BhcnR1ZUQxaG9CMFFpSFU4TFN5VjVhbApLclY0dHVlZU5URXpkL044bWJYME52bjNyTHRteFFhRUJ0enhwbG9mVTJqMVJwTjhUbGpDWGhSSU9paFUwb0xoClNYaUdQSGozMHo3TFdvTndsM3c3Z1p2TkhuKzV6OW5hZk9oVWJ1T3FuU09EMXRxLzV5cnh0K0czZ0kzQkpwR0QKMkRvekhVZUNWa3EzV29Cc2hRRFJ6ZVlyY1JHeXA1S0laRjliS3h1SVdTT3cwWllZbmJpRG9XYVd6N2xXemlobQp6L3dVU3RzblM4WnJxSWtuNXBwTE4yRnpMNU94OFM3bDhHQ210cEF4Sy9kNDdpeUx5QS80TlZ2SDlxZGFlMXdKCjJxYm4wM3ZRMXU3Y2VVTlY1cllCZWh2c1BMaFhIY3JRenh5VEx4OUpBcmRNK1lVQ0F3RUFBYU9CaWpDQmh6QUwKQmdOVkhROEVCQU1DQmFBd0V3WURWUjBsQkF3d0NnWUlLd1lCQlFVSEF3RXdJd1lEVlIwUkJCd3dHb0lZZEd4egpMWE5sZEhScGJtZHpMbVY0WVcxd2JHVXVZMjl0TUIwR0ExVWREZ1FXQkJRTjMwZ3dUaGpVY3JXeFlXRmtyQmFaCm9FZGI3REFmQmdOVkhTTUVHREFXZ0JTdW00S3ZVbENvL3BUS0pOa0tFNGovTkZ1c2NqQU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBUUVBRVJWMVM5U2ZCQk4rV1hJRlkvNXdvdzFMSlBDM3BIV1JRbDY1MFdLb2h2T1Y2OHpCaTJwKwpjK1dlaitYTWJ1cDVvc3hJa1p6bUt5VkJtSlBCaVU4NE4rOGxTazZYc2xkbVpRK2tNSTRIbDM2SnRXTTIwei9FCkFJaG5oLzRJTVFNQ0RiL0ZPSW0zaURZQmJQNmZVYmQ3SlAzMXlwMU5DcGE4MGF3R1pjQ2dHMDJhY2hqVGJWZ08KTk9WRGJhcDFGTjNoVno1UjRQdUJBdXUrVnJzZFJKTEZ5S0pEL1pIY2hCVURZaXF6OUJOZ1ltbE5aTEs0dHNWeQoyWTlzVlRjbWdFVlpub0JpQWk0OEhzTGJLQWxVRFhpdkdDT1F2NUVwWkNzV0VIbU0reGMyVjJ0c3hURWJOTHlnCmRxVnlnOG5ZZXZHU29vNmJ2emxvbWl1ZlkzNFBCdEpzMGc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURPekNDQWlPZ0F3SUJBZ0lVZGMwUW5hV09WVjQwRWhtcUdwNHdZMjZKOFFnd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5EQTVNamN4TkRFMk5UTmFGdzB6TkRBNU1qVXhOREUyTlROYU1DMHhGVEFUQmdOVkJBb01ER1Y0CllXMXdiR1VnU1c1akxqRVVNQklHQTFVRUF3d0xaWGhoYlhCc1pTNWpiMjB3Z2dFaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUMvMmxGdktkc25ZNDRRTWsyVUlDRGpvb1JkSFlQd0V3WCtaM0ZOcUgveQpRMG44VHNXSnhQa3J1S2dyK0lzRW5UaGQ1UGFQVFZLWVFJTEZtazhIQ2JMSnpta0ZBSVkrRlFka1phTVJVaWxRCjV4d3JOUk15MTFGbndhYUlYL2U5Zm1sZnBRU0E1Rm8wZHFoZE04N0hLVnpBdlRLaGFHTmdiem9RWlRYdkZYR3MKbjBTYVZCcGJQQzd4c2o2OHYzZ3NuckdZazlERmkzeTVyVnVGT3pPeFp3dkxXMEg5RmFEUkN6T3crZ0NPWGpWRQplSVJ5WldGd0YzN1BQdHljcG05anhxRkM5dW1IVEd0Y00rcHREVnUxY0dvcGZWT1hPR0xDbW1OZS80SG5oUnRaCmtrWnhOUzAvWkhsN0F3ZWFiNlFrK0hLNHQvdU8wUGpMencxK08yczdTYUFuQWdNQkFBR2pVekJSTUIwR0ExVWQKRGdRV0JCU3VtNEt2VWxDby9wVEtKTmtLRTRqL05GdXNjakFmQmdOVkhTTUVHREFXZ0JTdW00S3ZVbENvL3BUSwpKTmtLRTRqL05GdXNjakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUFvCmRObVZJTWNwa3QwbEdlbDlCYXVKWUZBNkdRa0NiNFpOVEVDSzJ6dTBVRnNiZUtic3NMOXpyczFGM2FkRUlvZVkKMkhUeldHaEs1NzBYYktwNTlQUjRVU0c3MlJtM0NsWStjclN1bk83ZEZaWnptMEZ1Ri8vOVBMTlRyS3AxNWIwYgpsdHQvanNMZGlDWUdxOXlBclhUR3ZnTzZGNFV0N1FoYm9XWEpDU1RNNHBYVmt4SFpVUXFMMmJydnpsZ1lHcUY3Ck5EL3NTNFJENWdCQldGUWVidFpiY1A4ckEvNGY0eXpGNTBwbFJGdUNWQUltOWVaZjV6NGl5bE1lYTJxS2xJaGoKa0RyS3YrZTJuY2syZ25TVkZJQnBYdXdMa2VNMGcxeXZhbHRJMkVYZEt1aWxUcTlJTGRJOGFvandyenVWZnNPSQpkd3ZEcFU2OW0zMW5FSTZ6dkZWTQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
kind: Secret
metadata:
  name: client-tls-settings-certificate
  namespace: gateway-conformance-infra
type: kubernetes.io/tls
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: http-client-tls-settings
  namespace: gateway-conformance-infra
spec:
  hostnames:
    - tls-settings.example.com
  parentRefs:
    - name: client-mtls-gateway
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /client-tls-settings
      backendRefs:
        - name: infra-backend-v1
          port: 8080
---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: ClientTrafficPolicy
metadata:
  name: ctp-client-tls-settings
  namespace: gateway-conformance-infra
spec:
  targetRef:
    group: gateway.networking.k8s.io
    kind: Gateway
    name: client-mtls-gateway
    sectionName: tls-settings
  tls:
    minVersion: "1.1"
    maxVersion: "1.2"
    ciphers:
      - ECDHE-RSA-AES128-GCM-SHA256
      - AES128-SHA
    ecdhCurves:
      - X25519
      - P-256
    alpnProtocols:
      - http/1.1
