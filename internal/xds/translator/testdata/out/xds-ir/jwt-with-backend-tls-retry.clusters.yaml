- circuitBreakers:
    thresholds:
    - maxRetries: 1024
  commonLbConfig: {}
  connectTimeout: 10s
  dnsLookupFamily: V4_PREFERRED
  edsClusterConfig:
    edsConfig:
      ads: {}
      resourceApiVersion: V3
    serviceName: httproute/default/httproute-1/rule/0
  ignoreHealthOnHostRemoval: true
  lbPolicy: LEAST_REQUEST
  loadBalancingPolicy:
    policies:
    - typedExtensionConfig:
        name: envoy.load_balancing_policies.least_request
        typedConfig:
          '@type': type.googleapis.com/envoy.extensions.load_balancing_policies.least_request.v3.LeastRequest
          localityLbConfig:
            localityWeightedLbConfig: {}
  name: httproute/default/httproute-1/rule/0
  perConnectionBufferLimitBytes: 32768
  type: EDS
- circuitBreakers:
    thresholds:
    - maxConnections: 2048
      maxPendingRequests: 1
      maxRequests: 4294967295
      maxRetries: 1024
  commonLbConfig: {}
  connectTimeout: 15s
  dnsLookupFamily: ALL
  dnsRefreshRate: 30s
  healthChecks:
  - healthyThreshold: 1
    httpHealthCheck:
      expectedStatuses:
      - end: "201"
        start: "200"
      - end: "301"
        start: "300"
      method: GET
      path: /healthz
      receive:
      - binary: RXZlcnl0aGluZyBPSw==
    interval: 3s
    timeout: 0.500s
    unhealthyThreshold: 3
  ignoreHealthOnHostRemoval: true
  lbPolicy: MAGLEV
  loadAssignment:
    clusterName: securitypolicy/default/policy-for-route/jwt/0
    endpoints:
    - lbEndpoints:
      - endpoint:
          address:
            socketAddress:
              address: foo.bar.com
              portValue: 443
        loadBalancingWeight: 1
        metadata:
          filterMetadata:
            envoy.transport_socket_match:
              name: securitypolicy/default/policy-for-route/jwt/0/tls/0
      loadBalancingWeight: 1
      locality:
        region: securitypolicy/default/policy-for-route/jwt/0/backend/0
  loadBalancingPolicy:
    policies:
    - typedExtensionConfig:
        name: envoy.load_balancing_policies.maglev
        typedConfig:
          '@type': type.googleapis.com/envoy.extensions.load_balancing_policies.maglev.v3.Maglev
  name: securitypolicy/default/policy-for-route/jwt/0
  outlierDetection:
    baseEjectionTime: 160s
    consecutive5xx: 5
    consecutiveGatewayFailure: 0
    consecutiveLocalOriginFailure: 5
    enforcingConsecutiveGatewayFailure: 100
    interval: 2s
    maxEjectionPercent: 100
  perConnectionBufferLimitBytes: 100000000
  respectDnsTtl: true
  transportSocket:
    name: dummy.transport_socket
    typedConfig:
      '@type': type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext
      commonTlsContext: {}
  transportSocketMatches:
  - match:
      name: securitypolicy/default/policy-for-route/jwt/0/tls/0
    name: securitypolicy/default/policy-for-route/jwt/0/tls/0
    transportSocket:
      name: envoy.transport_sockets.tls
      typedConfig:
        '@type': type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext
        commonTlsContext:
          combinedValidationContext:
            defaultValidationContext:
              matchTypedSubjectAltNames:
              - matcher:
                  exact: foo.bar.com
                sanType: DNS
            validationContextSdsSecretConfig:
              name: policy-btls/default-ca
              sdsConfig:
                ads: {}
                resourceApiVersion: V3
        sni: foo.bar.com
  type: STRICT_DNS
  typedExtensionProtocolOptions:
    envoy.extensions.upstreams.http.v3.HttpProtocolOptions:
      '@type': type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions
      autoConfig:
        http2ProtocolOptions:
          initialConnectionWindowSize: 1048576
          initialStreamWindowSize: 65536
        httpProtocolOptions: {}
      commonHttpProtocolOptions:
        idleTimeout: 16s
        maxConnectionDuration: 17s
        maxRequestsPerConnection: 1
  upstreamConnectionOptions:
    tcpKeepalive:
      keepaliveInterval: 60
      keepaliveProbes: 3
      keepaliveTime: 1200
