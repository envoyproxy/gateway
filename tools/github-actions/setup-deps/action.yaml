name: setup-deps
description: Install host system dependencies

runs:
  using: composite
  steps:
    - shell: bash
      run: sudo apt-get install libbtrfs-dev -y
    - uses: actions/setup-go@44694675825211faa026b3c33043df3e48a5fa00  # v5.0.1
      with:
        go-version-file: go.mod
        cache: true
    - shell: bash
      run: |
        go install github.com/wasilibs/go-prettier/v3/cmd/prettier@latest
        echo "$(go env GOPATH)/bin" >> $GITHUB_PATH
