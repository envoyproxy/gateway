# ./certs/client-mtls-trustbundle.sh
#
# kubectl create secret generic example-com-tls -n gateway-conformance-infra --from-file=ca.crt=example.com.crt --from-file=tls.crt=www.example.com.crt --from-file=tls.key=www.example.com.key --dry-run=client -o yaml > example-com-tls.yaml
apiVersion: v1
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURWVENDQWoyZ0F3SUJBZ0lVVCtlWHNsNDIrWnoyNzVZaVBjTWUvQnBuajJ3d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5UQTJNVGt4TWpFNU5URmFGdzB5TmpBMk1Ua3hNakU1TlRGYU1DMHhGVEFUQmdOVkJBb01ER1Y0CllXMXdiR1VnU1c1akxqRVVNQklHQTFVRUF3d0xaWGhoYlhCc1pTNWpiMjB3Z2dFaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUNQRWloRzZwbE5oU01nZkFYWmdQSDFzdjNWbklUV1hxbzRYd1I4SGVKRgpFYXVtVE1pcCtCM2djcXY4T3JNV2VORERWSzl3Q0lzVVpjNDIxcTFsRWRNWmdCNHBiQ1VMWUUzMkdjblh4TVNKCnVOUldYdU9JOTM5TkE4THJGb1dQV3BmNTUvcERhUTJKVFlDK1Jya05RcVhoa09rdlMvYTNuOEd3dDJnNjUzdUQKcUI4aWdtd0dESWliK2VBY0UxSnNMVldjaytHaG9wMkFyRjZoZFFDdXdBaHppSXR4RVhmQ3lJekhORXU0UXRtTQoybDRkd0xaYWdidjZqRkpvYTJ0cE9wYnFuQzNxZmZTRkN0RVVoMkRITXpVbUtsNGl3N0l4dWM1VWhHcVBFRWFLClZKUENnRSs3UXdHYWV3MzUxKzZtZFNVV1FtWDRIcWZMNllMMTNoR3FEOWtqQWdNQkFBR2piVEJyTUIwR0ExVWQKRGdRV0JCUWtKUDhZRVhVSUVrbmtsRGViNFNhQXlhYWIxVEFmQmdOVkhTTUVHREFXZ0JRa0pQOFlFWFVJRWtuawpsRGViNFNhQXlhYWIxVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQmdHQTFVZEVRUVJNQStDRFNvdVpYaGhiWEJzClpTNWpiMjB3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUNDcVNvRkgrZ3Z4SUtmcmE4dURDV1pGdVVrVWhKbE8KNFZmblo1SVpsZHlZSWk3c2hHbWdyWDZCcEdFK1RNM1E0Mk5nditMZUF2OUpyaTZ3YXFlNVdDc09oRWY2clBXNQpCNVp6OUEwN28vQUFYZDVVd25WWTNuejFEcC9pcUJ3WUJPbzk1U2U1Mnd4WXM0Qk1pOVF2ZlNQVEcrMFp3T3hoCnpjRjVrb0VIL0MxcGJtTWtSMFlpRHBpM295c0FxRnBMTy80MXozQ2hjbzY3QWlMaEV1K0JDdytGeHN3NVR5dGgKRlZJeGxtSnZhUklqcHFzWVRwcmUvUGFKUjEva2dveVorR1BRWFl0aGN0bmhZM203M2hRYWtTVGtRYUVBakxTMApDZEdOczJxMzk3ZmJ6dWw2eEhWUjQwRFFBV3IzaCs5a2tJamhVR3VCVnljSE1BY0hXeXcxWUNFPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQwakNDQXJxZ0F3SUJBZ0lVTzdKTjJjSE56ZmV6elBhSHlpK2kyRU9pL1Jnd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5UQTJNVGt4TWpFNU5URmFGdzB6TlRBMk1UY3hNakU1TlRGYU1Ea3hHREFXQmdOVkJBTU1EM2QzCmR5NWxlR0Z0Y0d4bExtTnZiVEVkTUJzR0ExVUVDZ3dVWlhoaGJYQnNaU0J2Y21kaGJtbDZZWFJwYjI0d2dnRWkKTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEaGV3bEd3cFNpNFpwWVhuSjBDR0pvZFFLMwo4RlZ5NzEyWVNVaHZGN3NBRzFHcmlqbUZBWDJ3SkFUMnNpVkRlOTdPODRtbGRDWXIxdTducWVqa090MDVuOFpBCjVyNk9RZUJnWmtyS1lmcjRyODdDeU5TTmJEZ1VRa1lIN1Fac0FWM2lqSmpmWm1KVk9HbUlPMFJFYjM5WFFVT3gKQjJrblp2QVBrWVBwZ0owd0JPS2JmRnhBUkM3YktGei9DQVROcEQ1TUFRWmlEbFFyTVNXT0FYTVFMNHh6RDNhVApSTnRlVW11RmxsVzJIRGZyVzA2RGw0OFlUZmt2bFU3bGJINUhBQVY3ZkkvZFJyYmhPSXRFajNSR2lHaitCS1gxCkpZSXE4ZXFyQXFubnZzckFKcEw0bks2eWFVMC93bzYzd2NFUGFpUE9KZlNLN2U3d3FWUU50aVlVaE8rYkFnTUIKQUFHamdkMHdnZG93SFFZRFZSME9CQllFRkhDK1NRcDZ3eW9jeG53Yjk4UU1vQTA1TmtXZU1HZ0dBMVVkSXdSaApNRitBRkNRay94Z1JkUWdTU2VTVU41dmhKb0RKcHB2Vm9UR2tMekF0TVJVd0V3WURWUVFLREF4bGVHRnRjR3hsCklFbHVZeTR4RkRBU0JnTlZCQU1NQzJWNFlXMXdiR1V1WTI5dGdoUlA1NWV5WGpiNW5QYnZsaUk5d3g3OEdtZVAKYkRBTUJnTlZIUk1FQlRBREFRSC9NQXNHQTFVZER3UUVBd0lDL0RBYUJnTlZIUkVFRXpBUmdnOTNkM2N1WlhoaApiWEJzWlM1amIyMHdHQVlEVlIwU0JCRXdENElOS2k1bGVHRnRjR3hsTG1OdmJUQU5CZ2txaGtpRzl3MEJBUXNGCkFBT0NBUUVBZEFqaDVhbWFRQmJoRE5JQ2JqVHZ3Y0lWaFhnNTI1NkxKaGwvRHc1Zk9vNWdIT05wVUJwWVBQcUQKVjMwdmlNMXloNkthb2lRc3JXSHNoMFgvR3RYT1JwemhaajN3c0NVTEFpRmsvb2Vva2pYZnFKbm1DNlc0b08rTwpsMzFFQnNtVkxPcmRDZFJrOTJMZ0FYY0lsdE1VVjViV25mdDF1RTExWEJTclUrcWNoS3h6VStUZ29yK3g4Nk5jCnNzKzdzMXFzbUFLc01OUXJVQXJFY21NZCtrZDFqTWJoV3BNQ2VWMXJ3QTB6UDVJa0F6Ym1GVmVkMEtyOVRwazQKWWw3V21kSnlNNVd3bENSS1JRWW5sN3RCUzdIVmZDck9pRW1rTU9SVU9XUEJwVU5uc0ZPVWVWNUo1N0x0WEVzcApwdWV3UytmdG5aZm91ODUyYUp1Nzc5Qnh6THN0U2c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRRGhld2xHd3BTaTRacFkKWG5KMENHSm9kUUszOEZWeTcxMllTVWh2RjdzQUcxR3Jpam1GQVgyd0pBVDJzaVZEZTk3Tzg0bWxkQ1lyMXU3bgpxZWprT3QwNW44WkE1cjZPUWVCZ1prcktZZnI0cjg3Q3lOU05iRGdVUWtZSDdRWnNBVjNpakpqZlptSlZPR21JCk8wUkViMzlYUVVPeEIya25adkFQa1lQcGdKMHdCT0tiZkZ4QVJDN2JLRnovQ0FUTnBENU1BUVppRGxRck1TV08KQVhNUUw0eHpEM2FUUk50ZVVtdUZsbFcySERmclcwNkRsNDhZVGZrdmxVN2xiSDVIQUFWN2ZJL2RScmJoT0l0RQpqM1JHaUdqK0JLWDFKWUlxOGVxckFxbm52c3JBSnBMNG5LNnlhVTAvd282M3djRVBhaVBPSmZTSzdlN3dxVlFOCnRpWVVoTytiQWdNQkFBRUNnZ0VBVE9iNXN2aUtXVU00c1FzRlhpMjk0b0tGK3RZdFRwWDFCZ3Q0ZU90UERDcEYKSUl4ME1iamdkVUxUcm8venhhQnB6WXVpVnB2V3FQMFZYazNFOEpKakFWUk0rYlc1S0N1dnF6RTRNTzVaK3BkNwpuVk9CcXZwTjVocjBaNStmb1JhV1ByNVZKVngyRFRyQVE0WnpNaVFVK2wxNENOak9OSElYVGpnREZaQ1lDOWY2CnBSU2RJejZ3SjlqR1RsUzhuWHZnc053WHZ4TG1tZ2hpNFdKYWtqUlh5T0NFUkxlV1JzeThCU2pKY0YvYkpLdFIKVlpWT0JsL29Dd1l4TCtwZExBUkUzdDgyOVQyQ2h5S2pFM2htRXhZT2tEQjc5R21JcEN1QTJBVXgrVCtkbVQ5QQpta1ZHK29lNHlUQWdSK004cW41N3FNeWZ0U3hRdmFhRFQzQXA5eFU5QVFLQmdRRDdPeHlZQVVYMVpnR2kwc2JHCnh3V2xyMnRHSXFZcFdCMjh0d1R6RlVCaVI4MStrTml0bVpEN0E5N2c5RUpaSWtQbEhwMkhzeHlFeVlFRHRkcGkKdXhRb1ZlVWZRcmd4ZmIrZWdFZmtQUVJqVjFnRU9aRGIzOWNaT1hVVXJoMGtNY1R4dGtManQ3eE9RV3FsZ20wKwphcTlVcmtZOFMzTExSNExOdWVzMXFHL0NTUUtCZ1FEbHdzbW8yaEg1K25SeVFlOWpNencyUG01djJ6c0YxOW9XCmN0ODU3VFB6eG83M1psZFllL2lRdktzQzJxcWtwTHZtdWh5ZkxQV00xRHVOYzhwbURtRHpTTHFPbXc0b1BwUjYKaURtMXA3UmhraWxKS3NBZEVNaXFNQkJQRHVxQmNDNWo4ZFkwaUlhb3JDVTV2eGY4V090N3FaVTVEVkRza2xncwpwbVlMUnVSaXd3S0JnRnhMSHZvSW5iYkZQcHllYWova0pZTDBxcWdkV29XZHhXN3FuWHJmdDhOak5XN2xyM1EzCkVqZmsrQ0FVRzd1N0JzNUpMUDRKSXRUMVlkd0hGcTltb3NVZXFRbU83VFBoU2wva0tJVUVsWFFaUmxCbkJYeUIKQXZoVlQxbkZqUmNhNFlzYXRnQUtJN2RyK00zTTJHMHhyQytqeGxHb05nZlB3WkhxVnlwak1vdGhBb0dCQU1NLwo1ZmxNNEF2cjc3c05GeTdZNG1sQ1lyMUJzNFhDcWYxN3Z3Rk45MkZKTWtOQndDWmNxNTNzQnZPVStZQ1MwVzlBClo0UkpRNTVhMlFUYkNudng2aWUwZlgwa2ZVSnI4K2V4RGtHMTg0OGJFMlN2SkxWT2h3aEJjZ3FOSlhHNzhHQlUKcW5EWU9IN3NVM0lnVjNURjU4K2VERWFBYjIycTY2MTk5cWZNcGRiYkFvR0JBUFBFa2cvMXVRdldsZmtRd3RiSwpRV3B1WXlvNlliUWwrUktYUUJzaFpTSUZwQXJTNTRUYWNtREd6eWhRNXV0RDhQWUJkL3hDMDhYRXA4T3FTckhGCnh3MnFtd1ZWZ2hSY1FWOThTUUNiMGhqWWRaMHJxL0tEaXZxMnBJSlpEYmpxSWp0dHZrSGR3V0JWbnM3ZU5vU2IKVnV4QmhMcHNEU05qSFYzTE9MQ3k2R0UyCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
kind: Secret
metadata:
  creationTimestamp: null
  name: example-com-tls
  namespace: gateway-conformance-infra
type: kubernetes.io/tls
---
apiVersion: certificates.k8s.io/v1beta1
kind: ClusterTrustBundle
metadata:
  name: example-com-tls
spec:
  trustBundle: |
    -----BEGIN CERTIFICATE-----
    MIIDVTCCAj2gAwIBAgIUT+eXsl42+Zz275YiPcMe/Bpnj2wwDQYJKoZIhvcNAQEL
    BQAwLTEVMBMGA1UECgwMZXhhbXBsZSBJbmMuMRQwEgYDVQQDDAtleGFtcGxlLmNv
    bTAeFw0yNTA2MTkxMjE5NTFaFw0yNjA2MTkxMjE5NTFaMC0xFTATBgNVBAoMDGV4
    YW1wbGUgSW5jLjEUMBIGA1UEAwwLZXhhbXBsZS5jb20wggEiMA0GCSqGSIb3DQEB
    AQUAA4IBDwAwggEKAoIBAQCPEihG6plNhSMgfAXZgPH1sv3VnITWXqo4XwR8HeJF
    EaumTMip+B3gcqv8OrMWeNDDVK9wCIsUZc421q1lEdMZgB4pbCULYE32GcnXxMSJ
    uNRWXuOI939NA8LrFoWPWpf55/pDaQ2JTYC+RrkNQqXhkOkvS/a3n8Gwt2g653uD
    qB8igmwGDIib+eAcE1JsLVWck+Ghop2ArF6hdQCuwAhziItxEXfCyIzHNEu4QtmM
    2l4dwLZagbv6jFJoa2tpOpbqnC3qffSFCtEUh2DHMzUmKl4iw7Ixuc5UhGqPEEaK
    VJPCgE+7QwGaew351+6mdSUWQmX4HqfL6YL13hGqD9kjAgMBAAGjbTBrMB0GA1Ud
    DgQWBBQkJP8YEXUIEknklDeb4SaAyaab1TAfBgNVHSMEGDAWgBQkJP8YEXUIEknk
    lDeb4SaAyaab1TAPBgNVHRMBAf8EBTADAQH/MBgGA1UdEQQRMA+CDSouZXhhbXBs
    ZS5jb20wDQYJKoZIhvcNAQELBQADggEBACCqSoFH+gvxIKfra8uDCWZFuUkUhJlO
    4VfnZ5IZldyYIi7shGmgrX6BpGE+TM3Q42Ngv+LeAv9Jri6waqe5WCsOhEf6rPW5
    B5Zz9A07o/AAXd5UwnVY3nz1Dp/iqBwYBOo95Se52wxYs4BMi9QvfSPTG+0ZwOxh
    zcF5koEH/C1pbmMkR0YiDpi3oysAqFpLO/41z3Chco67AiLhEu+BCw+Fxsw5Tyth
    FVIxlmJvaRIjpqsYTpre/PaJR1/kgoyZ+GPQXYthctnhY3m73hQakSTkQaEAjLS0
    CdGNs2q397fbzul6xHVR40DQAWr3h+9kkIjhUGuBVycHMAcHWyw1YCE=
    -----END CERTIFICATE-----
  # The following is an example of a client certificate that can be used to test mTLS with the above CA.
  # It is not required for the ClusterTrustBundle, but can be used to create a Kubernetes secret for testing.
  # To generate a client certificate, you can use the following commands:
---
# kubectl create secret generic client-example-com -n gateway-conformance-infra --from-file=ca.crt=example.com.crt --from-file=tls.crt=client.example.com.crt --from-file=tls.key=client.example.com.key --dry-run=client -o yaml > client-example-com.yamlapiVersion: v1
apiVersion: v1
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURWVENDQWoyZ0F3SUJBZ0lVVCtlWHNsNDIrWnoyNzVZaVBjTWUvQnBuajJ3d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5UQTJNVGt4TWpFNU5URmFGdzB5TmpBMk1Ua3hNakU1TlRGYU1DMHhGVEFUQmdOVkJBb01ER1Y0CllXMXdiR1VnU1c1akxqRVVNQklHQTFVRUF3d0xaWGhoYlhCc1pTNWpiMjB3Z2dFaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUNQRWloRzZwbE5oU01nZkFYWmdQSDFzdjNWbklUV1hxbzRYd1I4SGVKRgpFYXVtVE1pcCtCM2djcXY4T3JNV2VORERWSzl3Q0lzVVpjNDIxcTFsRWRNWmdCNHBiQ1VMWUUzMkdjblh4TVNKCnVOUldYdU9JOTM5TkE4THJGb1dQV3BmNTUvcERhUTJKVFlDK1Jya05RcVhoa09rdlMvYTNuOEd3dDJnNjUzdUQKcUI4aWdtd0dESWliK2VBY0UxSnNMVldjaytHaG9wMkFyRjZoZFFDdXdBaHppSXR4RVhmQ3lJekhORXU0UXRtTQoybDRkd0xaYWdidjZqRkpvYTJ0cE9wYnFuQzNxZmZTRkN0RVVoMkRITXpVbUtsNGl3N0l4dWM1VWhHcVBFRWFLClZKUENnRSs3UXdHYWV3MzUxKzZtZFNVV1FtWDRIcWZMNllMMTNoR3FEOWtqQWdNQkFBR2piVEJyTUIwR0ExVWQKRGdRV0JCUWtKUDhZRVhVSUVrbmtsRGViNFNhQXlhYWIxVEFmQmdOVkhTTUVHREFXZ0JRa0pQOFlFWFVJRWtuawpsRGViNFNhQXlhYWIxVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQmdHQTFVZEVRUVJNQStDRFNvdVpYaGhiWEJzClpTNWpiMjB3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUNDcVNvRkgrZ3Z4SUtmcmE4dURDV1pGdVVrVWhKbE8KNFZmblo1SVpsZHlZSWk3c2hHbWdyWDZCcEdFK1RNM1E0Mk5nditMZUF2OUpyaTZ3YXFlNVdDc09oRWY2clBXNQpCNVp6OUEwN28vQUFYZDVVd25WWTNuejFEcC9pcUJ3WUJPbzk1U2U1Mnd4WXM0Qk1pOVF2ZlNQVEcrMFp3T3hoCnpjRjVrb0VIL0MxcGJtTWtSMFlpRHBpM295c0FxRnBMTy80MXozQ2hjbzY3QWlMaEV1K0JDdytGeHN3NVR5dGgKRlZJeGxtSnZhUklqcHFzWVRwcmUvUGFKUjEva2dveVorR1BRWFl0aGN0bmhZM203M2hRYWtTVGtRYUVBakxTMApDZEdOczJxMzk3ZmJ6dWw2eEhWUjQwRFFBV3IzaCs5a2tJamhVR3VCVnljSE1BY0hXeXcxWUNFPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQyRENDQXNDZ0F3SUJBZ0lVTzdKTjJjSE56ZmV6elBhSHlpK2kyRU9pL1Jrd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5UQTJNVGt4TWpFNU5USmFGdzB6TlRBMk1UY3hNakU1TlRKYU1Ed3hHekFaQmdOVkJBTU1FbU5zCmFXVnVkQzVsZUdGdGNHeGxMbU52YlRFZE1Cc0dBMVVFQ2d3VVpYaGhiWEJzWlNCdmNtZGhibWw2WVhScGIyNHcKZ2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRRGtVTFdUeUY4NVdlVUZReUxVNkVUYwpTMDcyQWIzZEdvVlBmZDZJRCtxU2N3bjNNbTZjS2g1b1MrcytBTjJhTXhabEVqalgyWjNIM0JoZFJTWXpJNUN0Clg0K3huMnJrb0dsWUhNRmVsWXhBMG42MWVzQVNUQkgyRDdrdDVMUXVhNUUxUHJBSG9IRVl1MmlPM1g0MFRpR0cKS0pBUXpqc3ZEOTBCRG9nWTQ3YjhqdmlTVTdJY3c1Z3psQ2EzMWQ2MW5aWnEwazNIaDF0cENta1Jaejhsb1g0Nwo5YUd2SDRCenZwTXluVnp1MGNqOWFLSzlaQ0JjYmhOY0h5L08rRzJzUnAzNDFha3lycS9OZjNIbkVHQmtXWnVUCnpCdmxOOEFzWjNLZDJvVFBxTDZTYjVUeWwwN0dRcVpOTXdzcGZrLzR1NjE2NDQ5UWxQem9CRDhkTzBPMFpoazUKQWdNQkFBR2pnZUF3Z2Qwd0hRWURWUjBPQkJZRUZFZkprS3UzRG1Hdm9nVEN4Vm05dUZmWTNUSVlNR2dHQTFVZApJd1JoTUYrQUZDUWsveGdSZFFnU1NlU1VONXZoSm9ESnBwdlZvVEdrTHpBdE1SVXdFd1lEVlFRS0RBeGxlR0Z0CmNHeGxJRWx1WXk0eEZEQVNCZ05WQkFNTUMyVjRZVzF3YkdVdVkyOXRnaFJQNTVleVhqYjVuUGJ2bGlJOXd4NzgKR21lUGJEQU1CZ05WSFJNRUJUQURBUUgvTUFzR0ExVWREd1FFQXdJQy9EQWRCZ05WSFJFRUZqQVVnaEpqYkdsbApiblF1WlhoaGJYQnNaUzVqYjIwd0dBWURWUjBTQkJFd0Q0SU5LaTVsZUdGdGNHeGxMbU52YlRBTkJna3Foa2lHCjl3MEJBUXNGQUFPQ0FRRUFlcHMrSklnWVNBcVZSKzVyNnpva0FmYkNpY1psdS84OEFzV29GMCtoekRlU0ZUMUkKS1dBNHZIN3JhN0VScEE4MDY1RWVLY1B2dWkvNVB4eElYYXdxSkcwUndmMU43emlCVmg4UUVnaGk4K0UrdzBQQwpKSS9iemZGOUI3NkhjZEtJUi9FMnFiVm4zcXJwNVJEMTQxbVB1dG1ZUlBvYTBSVVFRU2VtUnMvb2VaR1krWHI2CnVETHVCdmFzZFlzM3VqQllUMStVbHZ4VVZyTHoyS3ZZQzZrTkUrYlFPaUMvS21NSVlBcDJGUlJVRXd1VitBaXUKWFpwRnFYSDlmdnBWcm15UjhJdml6TnBTUGgvM0lsK3dReTB1anZha2NucTJQenJpckthWkd4ekM2ZGxhYU1vZgovR0VsWGZ2T1NDaHJwdy9wMC9nOVBwK3R2NVNIRnk0eGV0b1NsUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRRGtVTFdUeUY4NVdlVUYKUXlMVTZFVGNTMDcyQWIzZEdvVlBmZDZJRCtxU2N3bjNNbTZjS2g1b1MrcytBTjJhTXhabEVqalgyWjNIM0JoZApSU1l6STVDdFg0K3huMnJrb0dsWUhNRmVsWXhBMG42MWVzQVNUQkgyRDdrdDVMUXVhNUUxUHJBSG9IRVl1MmlPCjNYNDBUaUdHS0pBUXpqc3ZEOTBCRG9nWTQ3YjhqdmlTVTdJY3c1Z3psQ2EzMWQ2MW5aWnEwazNIaDF0cENta1IKWno4bG9YNDc5YUd2SDRCenZwTXluVnp1MGNqOWFLSzlaQ0JjYmhOY0h5L08rRzJzUnAzNDFha3lycS9OZjNIbgpFR0JrV1p1VHpCdmxOOEFzWjNLZDJvVFBxTDZTYjVUeWwwN0dRcVpOTXdzcGZrLzR1NjE2NDQ5UWxQem9CRDhkCk8wTzBaaGs1QWdNQkFBRUNnZ0VBVERFTTcyVGlOa0xrRlRYNjFUOHYzNjQ0Q3d1NHZ5VC9FUENKeHpFOGtDUFkKMHdnZTlubHR6Vk5zalRQL3Y5cEZvblFLeVNtanFGTXdSRXZ6dkFRbDMxMnhGODhCL29yenJNWm4xM2NqcDJ3MwpnYnVWaG1XaFp0S0hjeVBMNTJQWlFRSUsvM2lRMVhhUkpZQVFBa2VDazRGTTFuYmtORWZnY2w1Vmw2ekNYNVI3CkRuQWRYeHY3YkFHRGprRXpUSElRTTNGb1ZORVRxVTM1d2s1SUdRUC9sUEFnVkZ2bmlvNUZDbDRQaWxxSkdIa1MKNVR3T1EySGR3TE5IdmpndTNuWk83aENGNU5BTWpQYy9hZzB2aytYc3hRN1N0disvSkR0TWpHcy9NZTJieGwyVApzRWhDS2VFVEhrdzFzZ2N3TEFwbWN5c1MyRmJRMHlKNS91K2FvK3dKRXdLQmdRRC9rc0xZWEFBUlQzRTZSL3hsCiswTHdxK2UveXAwOThDaUk1NkJLdnpraVJqSWRFYVgzamdLWU9UbitRRWNIWnl2R1paRFhJTjVpdXp5V3BOdE4KQUQzK0QvdHdJU2dJcmxseDhOTGg0d3FFWmFhQmlNTXVNZHIwS1FsWitDTWZKTHkwaFpvaEw5L1g2SkZNMVJEeApMbHZLRTVMSnRHeFRvWkZzZlJsN1RBeFdmd0tCZ1FEa3Nrd2dGOWpJaDFCOTBDdEw3NkJadjg5M0ozbldwcC81CmFIeldqRkhqeTJUanVIaGZDakxMSlJVdUJLYWlCSVhUdC9HVnphbzJacnVtVWp3RVMvZHN6azR4ZmNEbjJnTisKZjRZMHJGVGs5d0lXQklVZXJSNkNEWm80dEdpUlkycmFnU2hqZ1pJNjZnSnNWbVVqbmlPM3JZR0FNdVE1ZDVKdQphWE1jTVkva1J3S0JnRHIxa1l1MlZiR29vUmR2NmZOZzdzVjA4d2JVNkVlVXN0VTZra2tNS2xNVTNKVEdNSUtXCnVWU0N4elUzZ090ZFNzVC9RMVhOMkYvd2ovNjAwMzdGRW9nZENjV0pjS0hvRHV4eFFVVXBTcERXbm4zOW5nRjMKTU9ybzJLWnZ6ekp0R0RlUkpzaUhNZDJ1WW03V0xJMW5RM2V2NGtvMEhGV0N6WGk0dDNzeFJSdGpBb0dCQUk1YgplazJENnBxd3VHY0luTnJ3OTlUR05FT01uQ2dFb3BJaSs0cWw0QmUzTlQ4WFJqNkszNkZhblB0L1E2YVl3Q0ZSCllCMkszMGhyM0tVa2pWMXpXRG92bGJieSs1Q1hRaE9OR0NKVG42akRKVlpGVEFRVGFXazFSR25GeTAydElBZVIKM0cxTWE1VW1zNGx5b2hSd3pQVDZHU0dQREVmRmFhNDNEOE5lQ3A3akFvR0JBSVhFOERFL01HV3NoQnNDbUJXeQpybGtqQlJKbVh5UWpyM0plM3A0T0dKSWdUSWM5dE5kb29qM1pTZ3FpbDJ1MlhUdTNwQVEvM1NpMUtxWUd2eVNVCkhBcmVmVFY2elNvb2JyTGdzdi91WWtURmdaYXZPSE9OOE93enVndjJtZmtlaEhwV1ZFcGVtN3pVVGpicXpWQkcKckN1UUtxaFN4bGFnRGM0VFBKRzh5UEh4Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
kind: Secret
metadata:
  creationTimestamp: null
  name: client-example-com
  namespace: gateway-conformance-infra
type: kubernetes.io/tls
---
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: client-mtls-clustertrustbundle
  namespace: gateway-conformance-infra
spec:
  gatewayClassName: envoy-gateway
  listeners:
    - name: mtls
      port: 443
      protocol: HTTPS
      hostname: www.example.com
      tls:
        certificateRefs:
          - group: ""
            kind: Secret
            name: example-com-tls
        mode: Terminate
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: client-mtls-clustertrustbundle
  namespace: gateway-conformance-infra
spec:
  hostnames:
    - www.example.com
  parentRefs:
    - name: client-mtls-clustertrustbundle
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /cluster-trust-bundle
      backendRefs:
        - name: infra-backend-v1
          port: 8080
---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: ClientTrafficPolicy
metadata:
  name: ctp-client-mtls-clustertrustbundle
  namespace: gateway-conformance-infra
spec:
  targetRef:
    group: gateway.networking.k8s.io
    kind: Gateway
    name: client-mtls-clustertrustbundle
    sectionName: mtls
  headers:
    xForwardedClientCert:
      certDetailsToAdd:
        - Subject
      mode: SanitizeSet
  tls:
    clientValidation:
      caCertificateRefs:
        - kind: ClusterTrustBundle
          group: ""
          name: example-com-tls
