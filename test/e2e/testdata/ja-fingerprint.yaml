# ./certs/client-mtls-trustbundle.sh
#
# kubectl create secret generic foo-com-tls -n gateway-conformance-infra --from-file=ca.crt=example.com.crt --from-file=tls.crt=foo.example.com.crt --from-file=tls.key=foo.example.com.key --dry-run=client -o yaml > foo-com-tls.yaml
apiVersion: v1
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURWVENDQWoyZ0F3SUJBZ0lVQXFpaGJLVjBzZ240dXZwMEI1N0l3VUdNc2dBd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5URXlNekV3TVRRd016bGFGdzB5TmpFeU16RXdNVFF3TXpsYU1DMHhGVEFUQmdOVkJBb01ER1Y0CllXMXdiR1VnU1c1akxqRVVNQklHQTFVRUF3d0xaWGhoYlhCc1pTNWpiMjB3Z2dFaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURYVWx1ZkRkREhlSlRDS3BhUVBKV1lQRnp0Vno4bmpwcEZ4THcyWkdjOQp0N2xJNmp3MDUvZjZoanlYbWdXdFBTU0Q4Uk9hSi9zZktZNG8vZHUxVFBXUjJwSXB1UHZ0cHRYRGV0M1FiSldUCkhBVU9XaFpkbGFENHJ0TEFNaGhDRkFVK1Ezc2xGcERZMXVsaXBiOGd4WXBKWlF4aFJBbml4TERUeDdIWFcwbjIKcWNsb2txVkNkU1Z3aWlOcmY5UjJkbURqb1UzZXZLbkx0VDRCbTlHOEY4cWtPUkttbCs5QXR5QWVwS3I0Yyt0NwpSelZld25DOXZCU1gzRngrZkcyNFdzbkM0K2kza1YwWUFSL3c2SGxRUXRVMXNiUFovWGJFcVRzbTcrVHh4TE5VCnNDOUVZQ2JWeTM3YmYvNTJpcXBjV0lOL3F6SVQ2cjdUNXN3d2ZJRUZNd3Q3QWdNQkFBR2piVEJyTUIwR0ExVWQKRGdRV0JCUWVURWlWQk5GdVY5RkZtemJCYWorMzlYNHhGakFmQmdOVkhTTUVHREFXZ0JRZVRFaVZCTkZ1VjlGRgptemJCYWorMzlYNHhGakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQmdHQTFVZEVRUVJNQStDRFNvdVpYaGhiWEJzClpTNWpiMjB3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUZJdS90cVpwdkJCWmNOVnZtQXFpQTdzRWJZREllNmwKWTUrRGgxUDlGMlJlOFRFT2M0RkdHQkxDaDAvNzJtMHV4ck1TS1dyYURacHBkaFI3OGZGamIxRWhreDF3RkdYYwozSGpHSUJ2VjJKUm54QldZMnlaR1lBQnN6bjdHZzRQMzVYdUN5cmx6eFZVT0J3TGorUndLcTdUcTJmdURYaVZTCk1jdE53eWNDa2ZuTGMyT1NZNnlyNlUrbjhRTmdnZHR1cGhWa3JpTHlibE9YVGVaRWJ2Wm5FTHgxNCt6VnBxcWoKWkxzL0pab1BDb1REYWxkMWwvK1paWjcwQ0NuRm16eVZMa0JFT01qRFNqaWtaZnRyOWRqUkNmVCtZdzJJL2k3SgpROXlnN1hKSTgyME4zbHArbkZGcTNTbEZ3Q0lFS2hiV2IxL29iZXBkZ05hVG9CblJzZ1ljaXZZPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQwakNDQXJxZ0F3SUJBZ0lVT3pqOWVzaSt0ajVPQWxxQVViQ0NmZ0ErMVc0d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5URXlNekV3TVRRd05EQmFGdzB6TlRFeU1qa3dNVFF3TkRCYU1Ea3hHREFXQmdOVkJBTU1EMlp2CmJ5NWxlR0Z0Y0d4bExtTnZiVEVkTUJzR0ExVUVDZ3dVWlhoaGJYQnNaU0J2Y21kaGJtbDZZWFJwYjI0d2dnRWkKTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFER3Z6eFpwam1zNFo0N2l5MlRyZm1QL2cwOApObjJsVFF6NlZOR2JEQjVXVlo4WjJvOVJTdkFtN0RPVStsOXQ2emxtWWFDL3VNVERJZ3dUUGFFTldmUDF5ZE5pCkZjQjNxdWQ1UXd6OWgxQWhGak42MjRBY1JYK003L1h0SERIeWE1OC80cHBtTkNUK05QVXlZK0hxUUhTRHJoRk4KOEVOV1F2SFpVN1pxRy9NT2k1ZDZIdEY3bTEraGRldjgrUXpCOVJwVlI2M0krb0QxRWhWMXhmanhIL0JFU3RTUApma3V4aFlZNzByUXpiSEZ0amNQTVB3c0FDaEVYYnNqS0NRQ0Fsd1NCUXVKWGZwakNUL3FVOE5TNUVFcU4xRC9SCjRINkpoK01qbjNnemlpeHk3QS9hdTNvWkQ3UVZXTyt2eWdwbVNlckhRMU1IOTFLbGw3THp1Q2RRQmZhckFnTUIKQUFHamdkMHdnZG93SFFZRFZSME9CQllFRkRIRXVNZDl3cDJQOFF2WWxMZUhyc1BwSDFQZ01HZ0dBMVVkSXdSaApNRitBRkI1TVNKVUUwVzVYMFVXYk5zRnFQN2YxZmpFV29UR2tMekF0TVJVd0V3WURWUVFLREF4bGVHRnRjR3hsCklFbHVZeTR4RkRBU0JnTlZCQU1NQzJWNFlXMXdiR1V1WTI5dGdoUUNxS0ZzcFhTeUNmaTYrblFIbnNqQlFZeXkKQURBTUJnTlZIUk1FQlRBREFRSC9NQXNHQTFVZER3UUVBd0lDL0RBYUJnTlZIUkVFRXpBUmdnOW1iMjh1WlhoaApiWEJzWlM1amIyMHdHQVlEVlIwU0JCRXdENElOS2k1bGVHRnRjR3hsTG1OdmJUQU5CZ2txaGtpRzl3MEJBUXNGCkFBT0NBUUVBZWs2QWpCT2grcFBFS1dhN1BoZXA1ZmVyZjlTdGVRNzJnaVNEOXhwRU5HTWQzMmFieG1hRjM4SDkKUGRnOFlxNm1hcS9FM0hOQVdlUlpjSmhSVzI4a1pzREoyYUtnR2txRjM3d3B0R3JWUFNkVmZWQ0JjRDVWbnJpWgpQRkovcTdISjRlZlZHWW95cEFmN2Npa3h4V0NwSEozZDRaaERRRWwvUG8rTWNremY5ZjV1cjFNT3BKQ2FZenNFCjg1OXdoL3M3ZlhaQnBZOGZpNkQvYnBOOG5ZY1NiNnZaMUNnd0M2RWxMaVFveFRnVTF5c0hNbzlsdzIzenNNMFEKTEdTWkY2ZWhNTWJLR1lzcUdBVSs0T3h4a0lWUUZiR09jYlRkOC9IUmNoOWJSR1BXTzhnTnJkT29INEdsQmV3eApIcU1hWHQ2dVJnRWhIbitoQnBUOTE2cTM3aXQyMWc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRREd2enhacGptczRaNDcKaXkyVHJmbVAvZzA4Tm4ybFRRejZWTkdiREI1V1ZaOFoybzlSU3ZBbTdET1UrbDl0NnpsbVlhQy91TVRESWd3VApQYUVOV2ZQMXlkTmlGY0IzcXVkNVF3ejloMUFoRmpONjI0QWNSWCtNNy9YdEhESHlhNTgvNHBwbU5DVCtOUFV5ClkrSHFRSFNEcmhGTjhFTldRdkhaVTdacUcvTU9pNWQ2SHRGN20xK2hkZXY4K1F6QjlScFZSNjNJK29EMUVoVjEKeGZqeEgvQkVTdFNQZmt1eGhZWTcwclF6YkhGdGpjUE1Qd3NBQ2hFWGJzaktDUUNBbHdTQlF1SlhmcGpDVC9xVQo4TlM1RUVxTjFEL1I0SDZKaCtNam4zZ3ppaXh5N0EvYXUzb1pEN1FWV08rdnlncG1TZXJIUTFNSDkxS2xsN0x6CnVDZFFCZmFyQWdNQkFBRUNnZ0VBWVRCREl0UFdnR1FVTEtueXI3VHp4U1pHOHByeTlsS25kZ0xrUFIyLytCZ0cKcFczcmg2Vk5xcnIydm5OeEZ4OWdBbURiYXVXLzBteGoyMFRYN04rQUhVR0V6UUkyREU3V3dzVzNKSU4yKzdjUApsWlNoSVRJYkhhQjZjbWpIUS9TOCsxQ2trRFlQb1Ava3A2K1FXaTBLelJuaC9HcnhnczFaMXh6SXB6cmpzTWhWCnF1dGlDUHJ1UnFkbzdlMHAwSEYxdzM1WStuSXlta3hDSW1ZTVlhQ2FmNW1jVS9Ga2VzU3g0a0N6dFNiVkVZcEYKejFDSWYzdzJhamJ3R29FMU9LTSt6bDZxaFFVTlB0OU94QUNueXZVdzFieEVlM0Rlc2lPUWZ1RTFxNVVkSi82Wgp3UTVFZiswM2sxVVl0Zjc2WnNWYkpuYkpUMjdudVlHZ3l4V0tYTTBPZ1FLQmdRRG5xcjBCdzZKUEdJS0J1NnpPCmhnNTcxck1GektqckJtTGREbVRHRjdIUW5xaEZydnZEZ250NVV5T3F0dE9Pckdha3VUVG9BMW5WbmVTRXZjeDYKOWRmVTJPRDZDakFmYzlGVG03TGRkMmYrc2RERyswWis1NlJlcS9WbVMyUEEycllLczg1T2pUclA1TUw0UUNGagp4SU1VaUxITldKTmMyUHNqaCtSR3Q3clBaUUtCZ1FEYm4xRlpOSnczd210TmRLREtWTHZBOW85UkFYZzFGT2lCCnhzbC8rL1psOEtBcGkyaGtUTitFV3FzSEF2ZWpTM0pYZlRLVzZMWnlvdmljR0orVFJFRy9MRzI0KzhTdHJUcHIKNWxTLzBwMjR5dWtQMkpxT2YzMkJZV2w5akFxK2IvdzhuNlFscm5RMVYvb3pLVzQ5UmFEOWc5TTNyQ0V2NG9VVwp5K09ONGx6MHp3S0JnUUN4TngzUWZLdnJuNDh0MkxmdllBTXlYbUdoL1JYMmUzTWpNTUNML0ZJc2lVR2wxSjZJCng0YlduMis0UnBUOUhncUMxWjZRSVFnV2Jlc0NWQUpZeVRrcWZDRlZoSGVkaDhaSUUrRzJvb0h1Qm0zejJRSHIKVUIyZndpRTkrRXU5bWxFSlROUnpxSHVsenBRS3ZWd05hcVR2RDBZY0ZEYmVIcW0yVzF5WGNESzZOUUtCZ0YzZwoxamNaaEFWWnQrQmVFRFVzenkwR3QvQmFmblhDUURqcExremsrVWhOK1VpSTdOQ2pBNUJoNldXUDRTY09Jd3crCjJoY2oxb2xlSElNdEMxazUvaGluOXlieGgvcnRaMkdrRFdvSnI1M0VMcWUxWVN1MFY0T3NqaGs2ZVlVNS9VbzAKdTBmWU1KaDB5T0NCdnp1MXZjRmdUak1vQXUrakZsek9QckR4cCthRkFvR0JBTmZYZE9yMGRLdUdtRlR1Rk96MgorMXM3ZzY1VzlhT3QxWFhKMHBOam1oYnlqbStIWWd4NlYvMEN4Q0txNjZOQTNvOE8rUjF4TnoyTG1Ia1pJMytlCktzYjBDeWVTa0xZdDd4V3hnaittcnRTV2NWQzJXOGsrN3ZOL3ZHZzZncm9hbFVTRXZhQmhlV3pkM2tVL1BHejcKYUxUcGZXN1kvVnFaWDhFOGx1WHlEQnNmCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
kind: Secret
metadata:
  creationTimestamp: null
  name: foo-com-tls
  namespace: gateway-conformance-infra
type: kubernetes.io/tls
---
# kubectl create secret generic bar-com-tls -n gateway-conformance-infra --from-file=ca.crt=example.com.crt --from-file=tls.crt=bar.example.com.crt --from-file=tls.key=bar.example.com.key --dry-run=client -o yaml > bar-com-tls.yaml
apiVersion: v1
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURWVENDQWoyZ0F3SUJBZ0lVQXFpaGJLVjBzZ240dXZwMEI1N0l3VUdNc2dBd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5URXlNekV3TVRRd016bGFGdzB5TmpFeU16RXdNVFF3TXpsYU1DMHhGVEFUQmdOVkJBb01ER1Y0CllXMXdiR1VnU1c1akxqRVVNQklHQTFVRUF3d0xaWGhoYlhCc1pTNWpiMjB3Z2dFaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURYVWx1ZkRkREhlSlRDS3BhUVBKV1lQRnp0Vno4bmpwcEZ4THcyWkdjOQp0N2xJNmp3MDUvZjZoanlYbWdXdFBTU0Q4Uk9hSi9zZktZNG8vZHUxVFBXUjJwSXB1UHZ0cHRYRGV0M1FiSldUCkhBVU9XaFpkbGFENHJ0TEFNaGhDRkFVK1Ezc2xGcERZMXVsaXBiOGd4WXBKWlF4aFJBbml4TERUeDdIWFcwbjIKcWNsb2txVkNkU1Z3aWlOcmY5UjJkbURqb1UzZXZLbkx0VDRCbTlHOEY4cWtPUkttbCs5QXR5QWVwS3I0Yyt0NwpSelZld25DOXZCU1gzRngrZkcyNFdzbkM0K2kza1YwWUFSL3c2SGxRUXRVMXNiUFovWGJFcVRzbTcrVHh4TE5VCnNDOUVZQ2JWeTM3YmYvNTJpcXBjV0lOL3F6SVQ2cjdUNXN3d2ZJRUZNd3Q3QWdNQkFBR2piVEJyTUIwR0ExVWQKRGdRV0JCUWVURWlWQk5GdVY5RkZtemJCYWorMzlYNHhGakFmQmdOVkhTTUVHREFXZ0JRZVRFaVZCTkZ1VjlGRgptemJCYWorMzlYNHhGakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQmdHQTFVZEVRUVJNQStDRFNvdVpYaGhiWEJzClpTNWpiMjB3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUZJdS90cVpwdkJCWmNOVnZtQXFpQTdzRWJZREllNmwKWTUrRGgxUDlGMlJlOFRFT2M0RkdHQkxDaDAvNzJtMHV4ck1TS1dyYURacHBkaFI3OGZGamIxRWhreDF3RkdYYwozSGpHSUJ2VjJKUm54QldZMnlaR1lBQnN6bjdHZzRQMzVYdUN5cmx6eFZVT0J3TGorUndLcTdUcTJmdURYaVZTCk1jdE53eWNDa2ZuTGMyT1NZNnlyNlUrbjhRTmdnZHR1cGhWa3JpTHlibE9YVGVaRWJ2Wm5FTHgxNCt6VnBxcWoKWkxzL0pab1BDb1REYWxkMWwvK1paWjcwQ0NuRm16eVZMa0JFT01qRFNqaWtaZnRyOWRqUkNmVCtZdzJJL2k3SgpROXlnN1hKSTgyME4zbHArbkZGcTNTbEZ3Q0lFS2hiV2IxL29iZXBkZ05hVG9CblJzZ1ljaXZZPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQwakNDQXJxZ0F3SUJBZ0lVT3pqOWVzaSt0ajVPQWxxQVViQ0NmZ0ErMVc4d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xURVZNQk1HQTFVRUNnd01aWGhoYlhCc1pTQkpibU11TVJRd0VnWURWUVFEREF0bGVHRnRjR3hsTG1OdgpiVEFlRncweU5URXlNekV3TVRRd05EQmFGdzB6TlRFeU1qa3dNVFF3TkRCYU1Ea3hHREFXQmdOVkJBTU1EMkpoCmNpNWxlR0Z0Y0d4bExtTnZiVEVkTUJzR0ExVUVDZ3dVWlhoaGJYQnNaU0J2Y21kaGJtbDZZWFJwYjI0d2dnRWkKTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEZG03NWRuL1RhOVlOa0VYNFQ4aHlYRUtOaApCM0lRZHRRR0ZqcDNtZ1o4R1pjSXAxTmk1VEl5ajJudE4xajhWY2JNVHZpRlYxZWNjNFVKNjFkOHB3dGJkeC9ZClBCa3lsdEVXellTcDRnZXliMFExaTZzVEhFODhVVUxpeEZETTNrYkNaczhGdnhWd01RZjVTZkhhN3ozYVBtVVYKQ0h0aFAvMGk4cjJydVF3UkhUOWsrZWVkYnh5RUVRbE1WbXFTMTZTQU9IOHdTL2t1TEJmWnFUWjM2OHk1U002ZwptZTBoWm1RWW5oN2p6TFAraFFRSUZHUUZLRGExaUtrNllldHRDRThyTWlibjcycC9ML0ZaWkJtQzFka2x6WFRqClpWR3d4dGlyVDN4K3FMVXRkaEx1STRmeWxJU21WOXJFVlRiV0Vid3FpblNxU0lSYTU5NklZRDJQUW0wTEFnTUIKQUFHamdkMHdnZG93SFFZRFZSME9CQllFRkFyak92RElLWG9Ud1FRdkJrUkVRWU5Eb0ZNMU1HZ0dBMVVkSXdSaApNRitBRkI1TVNKVUUwVzVYMFVXYk5zRnFQN2YxZmpFV29UR2tMekF0TVJVd0V3WURWUVFLREF4bGVHRnRjR3hsCklFbHVZeTR4RkRBU0JnTlZCQU1NQzJWNFlXMXdiR1V1WTI5dGdoUUNxS0ZzcFhTeUNmaTYrblFIbnNqQlFZeXkKQURBTUJnTlZIUk1FQlRBREFRSC9NQXNHQTFVZER3UUVBd0lDL0RBYUJnTlZIUkVFRXpBUmdnOWlZWEl1WlhoaApiWEJzWlM1amIyMHdHQVlEVlIwU0JCRXdENElOS2k1bGVHRnRjR3hsTG1OdmJUQU5CZ2txaGtpRzl3MEJBUXNGCkFBT0NBUUVBdU5uMnRPcXJ1Tm12ek1qcjFxTjBmRmtPeU9GZ250K2F3dlNsTUVHV0hPTzZ2NkRkTks1N1lxSk8KcG5ESEx6VnFDSk1ZSURMVUJyVmlRaHI4VDRsdWs5dzlvWEhCTXpNZTAwMU1MenRid2lBdHNpQ1M3K3BYRGdaeQpscWdqejA4b2YrY2xYRzBoT0NMTU9uL1d1OTU2T2FzU3JoME5zUUg3ZWtITXg1MXltUUt2M3dMZk1CQTJLNmRpCkJ3cHpzY2phb3FCdHU4eld6MHgxZ2MybWFtNUJpcFcxNnEyY2RYaHdLc2M3K3d5a3BoTGkySk5OdW9HSC9uZWUKZm9xZ3daaVVPWUJJdzlCald4OUhkUGZURnh3bjYrT3RJOVVlRWI0Q201Y1pxeDk1dktIMVBIRFB4TW1qb01raQpzc0toVlZZM1ZuWEtkQ3Z1VjlGeHR3UmxPMjdvWnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2d0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktrd2dnU2xBZ0VBQW9JQkFRRGRtNzVkbi9UYTlZTmsKRVg0VDhoeVhFS05oQjNJUWR0UUdGanAzbWdaOEdaY0lwMU5pNVRJeWoybnROMWo4VmNiTVR2aUZWMWVjYzRVSgo2MWQ4cHd0YmR4L1lQQmt5bHRFV3pZU3A0Z2V5YjBRMWk2c1RIRTg4VVVMaXhGRE0za2JDWnM4RnZ4VndNUWY1ClNmSGE3ejNhUG1VVkNIdGhQLzBpOHIycnVRd1JIVDlrK2VlZGJ4eUVFUWxNVm1xUzE2U0FPSDh3Uy9rdUxCZloKcVRaMzY4eTVTTTZnbWUwaFptUVluaDdqekxQK2hRUUlGR1FGS0RhMWlLazZZZXR0Q0U4ck1pYm43MnAvTC9GWgpaQm1DMWRrbHpYVGpaVkd3eHRpclQzeCtxTFV0ZGhMdUk0ZnlsSVNtVjlyRVZUYldFYndxaW5TcVNJUmE1OTZJCllEMlBRbTBMQWdNQkFBRUNnZ0VBT1VqaUs3ZUdodmRDRUtNSThVVDdxUDB2RG96ckttQmRMSG1nZ1h3NlF1Z20KaDZFaFNBWXhOS3FuMmg4ZGpKVHJ2N0tHUVltelp3amhrZy9ZM0tzZG4zWXFzQzNRNGFma3dyMDdsdUtMMU04NApWWk1XRk9tVGZlY1BvQ2paTGl3akpHdUpCbFkveDNHVk94YW5RMDNtc2p6QXluQVgzS3E2MThiaHlyc1o2RzRvCjM3UGRoNE0vanpsMWk3dnNYZVl1TTF0Q0dZanpiWDlmSWwya2tiemFLbEpHU2Y0S3p3Y2VXY3pObC9RQUVUKzUKRnRVT1JFblJuYkVVMnRtRzhoRnh5dFE0b0svOWR5Yjh5RjdxNjVRVUFZYWxEWkRjeGV6c01yS0VRek85T1JSUgpXcit6R2RTS1hHY2w2SFMzMjZ4enZWN2hIdkx1bVpnQ2hDelcvL0l3MFFLQmdRRDBWbW5lODJLNHZMSDNxSkppCjRVeS8wSkZibEVIL3hnSmx4eE16czFjY3lZTGViWGh5bm56OCtyeVpLc0pHQldsSmI4Q2dEaElqb1RZT3hLekwKSzF4MU44ZDY1Um5MUjduZmZIY2U4SnVHU0Z3c1ZpcGcwUCtDMENQVHE3ZWMrTG1HNDFoSEJoZjhXZzFwK2toSgo5b1NsYXk1SG5WTDVrUVphOEVYVTNGbmNzd0tCZ1FEb0w1bU02WkI5eXhMR2pJUjhVekhUYzRETGY3UmVsYzFMCnRueDFhVTFvcTFQZWcvaVhLVW16Z1dMbUtxZEU1WnBUYzhWWEhROCs1UFFTK1NPNmZQNERjVGZCVWNCVDdoNlAKdUNZL0FLMFZ2dlFJVDN5anUvd1NZOXMxS3FYR0NKNVpJWngwenRBM09oYlExNnZnUDltOStMS3VPVzVKdWdVZApVWHVhSGE2S1NRS0JnUURKZ1BxUEErbkdzTmVVaDFFeWV0dncxUEVMdFprNGR2UkRPNHA2ZU15KzBQRTh2c3MyCnU3NFlaREJsb1AzWEFWOXpVTlpyS1MrTWNzZENKckRhWFVoQzQxMS8zTEVKRkg0VjhXL0w5R0pPdkI1SDhrZkEKMEp2b0pmOWw4WmZidk1SRW1mbVRtVkx1cXRXbE1PT3RHOEVKS3Z0ZjFEODUwb0NMUHR4WVQrRk1RUUtCZ1FETQp2eXpvMWc1VTMzN3ZGM3E5SjZBSWx4SThZYURzeDYwQjF5cHBYektqMm5GYkI0VnZ4emoyMG1Ja0ZmanJDSTNPCmlZaThDU1Fva2oycGZZbkVLZlRWbEVGV2VJRGhnbG53NHJMWFhBRkY2OTNHZGxHekVWSjM1UmFwQzdLanIzWHoKbzNBVWtVdUxaKzQydS9rVkJ6azhETk9FVDZDeDR4Z2ZnbnM4ckcvK0FRS0JnUUN3eEp2NEZnbzhHY3NOVG9NRwpmdmJ3K1BlUXduN2RSS3JRL2c3MkxvWWN3WFRkSitFZ21vdzhxL0dPWFdMS3VEcFZYSUdFZE1sOXBvbjVVNW9rCmVDOVZpU1hDK1ZUdWdZNHVtREFPR0JzMUlBbWFmb0JWa3hCa0YwOGN5R2xIdFo1dUNnUHJrQlkyMDVscGxhRVUKUEhRdVRmTnhsMWx0eWFFSEFnV2J6a2R3b0E9PQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==
kind: Secret
metadata:
  creationTimestamp: null
  name: bar-com-tls
  namespace: gateway-conformance-infra
type: kubernetes.io/tls
---
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: https-fingerprint-gw
  namespace: gateway-conformance-infra
spec:
  gatewayClassName: "{GATEWAY_CLASS_NAME}"
  listeners:
    - name: https-foo
      protocol: HTTPS
      port: 443
      hostname: foo.example.com
      tls:
        mode: Terminate
        certificateRefs:
          - kind: Secret
            group: ""
            name: foo-com-tls
    - name: https-bar
      protocol: HTTPS
      port: 444
      hostname: bar.example.com
      tls:
        mode: Terminate
        certificateRefs:
          - kind: Secret
            group: ""
            name: bar-com-tls
---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: ClientTrafficPolicy
metadata:
  name: https-foo-ja3-ctp
  namespace: gateway-conformance-infra
spec:
  tls:
    fingerprints:
      - JA3
  targetRefs:
    - group: gateway.networking.k8s.io
      kind: Gateway
      name: https-fingerprint-gw
      sectionName: https-foo
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: http-route-ja3-foo
  namespace: gateway-conformance-infra
spec:
  parentRefs:
    - name: https-fingerprint-gw
  hostnames:
    - foo.example.com
  rules:
    - backendRefs:
        - group: ""
          kind: Service
          name: infra-backend-v1
          port: 8080
          weight: 1
      matches:
        - path:
            type: PathPrefix
            value: /
      filters:
        - type: ResponseHeaderModifier
          responseHeaderModifier:
            set:
              - name: ja3-fingerprint
                value: "%TLS_JA3_FINGERPRINT%"
              - name: ja4-fingerprint
                value: "%TLS_JA4_FINGERPRINT%"

---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: ClientTrafficPolicy
metadata:
  name: https-bar-ja3-and-ja4-ctp
  namespace: gateway-conformance-infra
spec:
  tls:
    fingerprints:
      - JA3
      - JA4
  targetRefs:
    - group: gateway.networking.k8s.io
      kind: Gateway
      name: https-fingerprint-gw
      sectionName: https-bar
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: http-route-ja3-and-ja4-bar
  namespace: gateway-conformance-infra
spec:
  parentRefs:
    - name: https-fingerprint-gw
  hostnames:
    - bar.example.com
  rules:
    - backendRefs:
        - group: ""
          kind: Service
          name: infra-backend-v1
          port: 8080
          weight: 1
      matches:
        - path:
            type: PathPrefix
            value: /
      filters:
        - type: ResponseHeaderModifier
          responseHeaderModifier:
            set:
              - name: ja3-fingerprint
                value: "%TLS_JA3_FINGERPRINT%"
              - name: ja4-fingerprint
                value: "%TLS_JA4_FINGERPRINT%"
